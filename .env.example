# IDP Platform Environment Variables
# Copy this file to .env.local and fill in your actual secrets
# NEVER commit .env.local to version control!

# === Application ===
DEBUG=true
API_V1_PREFIX=/api/v1

# === Database ===
DATABASE_URL=postgresql://idp:idp_password_change_in_prod@postgres:5432/idp_db

# === GitHub Configuration (Required) ===
# Create a Personal Access Token at: https://github.com/settings/tokens
# Required scopes: repo, read:packages, write:packages
GITHUB_TOKEN=ghp_your_github_personal_access_token_here
GITHUB_ORG=your-github-username-or-organization
GITHUB_BASE_URL=https://api.github.com

# === ArgoCD Configuration ===
# Get password: kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d
ARGOCD_URL=https://localhost:8080
ARGOCD_USERNAME=admin
ARGOCD_PASSWORD=your-argocd-password-here
ARGOCD_NAMESPACE=argocd
ARGOCD_VERIFY_SSL=true
# Optional: Path to custom CA certificate for self-signed certs
# ARGOCD_CA_CERT_PATH=/path/to/ca.crt

# === Kubernetes Configuration ===
KUBE_CONTEXT=kind-idp-cluster
KUBE_NAMESPACE=default

# === Container Registry ===
CONTAINER_REGISTRY=ghcr.io

# === Authentication ===
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=your-secure-random-secret-key-change-this-use-openssl-rand-hex-32
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=480
REFRESH_TOKEN_EXPIRE_DAYS=7

# === CORS ===
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# === Secrets Backend (optional) ===
# Options: env (default), aws, vault, k8s
SECRETS_BACKEND=env

# === AWS Secrets Manager (if SECRETS_BACKEND=aws) ===
# AWS_REGION=us-east-1
# AWS credentials should be configured via IAM role or ~/.aws/credentials

# === HashiCorp Vault (if SECRETS_BACKEND=vault) ===
# VAULT_ADDR=https://vault.company.com
# VAULT_TOKEN=s.xxxxx
# VAULT_MOUNT_POINT=secret
# VAULT_SECRET_PATH=idp

# === Observability ===
# Prometheus and Grafana are configured in docker-compose.yml
# Access Grafana at http://localhost:3000 (admin/admin)
